<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (dns-forward.Dns_forward.Rpc.Client.Make)</title><link rel="stylesheet" href="../../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../../index.html">dns-forward</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Dns_forward.Rpc.Client.Make</span></h1></header><div class="doc"><p>Construct an RPC client given a Flow and a method of Framing messages
over the flow.</p></div><h3 class="heading">Parameters</h3><div><div class="spec argument" id="argument-3-Time"><a href="#argument-3-Time" class="anchor"></a><div class="def argument"><code>Time : Mirage_time_lwt.S</code></div><div class="doc"></div></div><div class="spec argument" id="argument-2-Framing"><a href="#argument-2-Framing" class="anchor"></a><div class="def argument"><code><a href="argument-2-Framing/index.html">Framing</a> : <a href="../../../Framing/index.html#module-type-S">Framing.S</a><span class="keyword"> with </span><span class="keyword">type </span><a href="argument-2-Framing/index.html#type-flow">flow</a><span class="keyword"> = </span><a href="index.html#argument-1-Flow">Flow</a>.flow</code></div><div class="doc"></div></div><div class="spec argument" id="argument-1-Flow"><a href="#argument-1-Flow" class="anchor"></a><div class="def argument"><code><a href="argument-1-Flow/index.html">Flow</a> : <a href="../../../Flow/index.html#module-type-Client">Flow.Client</a><span class="keyword"> with </span><span class="keyword">type </span><a href="argument-1-Flow/index.html#type-address">address</a><span class="keyword"> = </span>Ipaddr.t<span class="keyword"> * </span>int</code></div><div class="doc"></div></div></div><h3 class="heading">Signature</h3><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p>A Remote Procedure Call client which can send requests to a server
and receive responses.</p></div></div><div class="spec type" id="type-request"><a href="#type-request" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>request</code><code><span class="keyword"> = </span>Cstruct.t</code><code></code></div><div class="doc"><p>A complete request</p></div></div><div class="spec type" id="type-response"><a href="#type-response" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>response</code><code><span class="keyword"> = </span>Cstruct.t</code><code></code></div><div class="doc"><p>A complete response</p></div></div><div class="spec type" id="type-address"><a href="#type-address" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>address</code><code><span class="keyword"> = </span><a href="../../../Config/Address/index.html#type-t">Config.Address.t</a></code><code></code></div><div class="doc"><p>The address of the remote endpoint</p></div></div><div class="spec type" id="type-message_cb"><a href="#type-message_cb" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>message_cb</code><code><span class="keyword"> = </span>?&#8288;src:<a href="index.html#type-address">address</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;dst:<a href="index.html#type-address">address</a> <span class="keyword">&#8209;&gt;</span> buf:Cstruct.t <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code><code></code></div><div class="doc"><p>A callback called per message, which permits recording and analysis.
If an address is unknown (e.g. it is selected by the kernel when routing
the packets) then the corresponding argument will be omitted</p></div></div><div class="spec val" id="val-connect"><a href="#val-connect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>connect : ?&#8288;message_cb:<a href="index.html#type-message_cb">message_cb</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-address">address</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <a href="../../../Error/index.html#type-t">Error.t</a></code></div><div class="doc"><p>Connect to the remote server</p></div></div><div class="spec val" id="val-rpc"><a href="#val-rpc" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>rpc : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-request">request</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-response">response</a> <a href="../../../Error/index.html#type-t">Error.t</a></code></div><div class="doc"><p>Send a request and await a response. Multiple threads may call this
in parallel and it is the implementation's job to associate the right
response with the original request.</p></div></div><div class="spec val" id="val-disconnect"><a href="#val-disconnect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>disconnect : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p>Disconnect from the server and free all resources.</p></div></div></body></html>